<div class="page-width featured-products">
  {% if section.settings.section_heading != blank %}
  <div class="section-heading">
    {{ section.settings.section_heading | replace: '<p', '<h2' }} </div>
      {% endif %}

      {% if section.settings.collection != blank %}
      <div class="featured-products__carousel"
        data-flickity='{ "cellAlign": "left", "contain": true, "pageDots": false, "prevNextButtons": false, "imagesLoaded": true }'>
        {% for product in section.settings.collection.products limit: section.settings.product_limit %}
        <div class="featured-products__carouselitem">
          {% render 'product-card', section: section, product: product %}
        </div>
        {% endfor %}
      </div>
      {% endif %}
  </div>



  {% schema %}
  {
  "name": "Featured products",
  "class": "section",
  "tag": "section",
  "settings": [
  {
  "type": "richtext",
  "id": "section_heading",
  "label": "Section heading"
  },
  {
  "type": "collection",
  "id": "collection",
  "label": "Collection"
  },
  {
  "type": "range",
  "id": "product_limit",
  "min": 4,
  "max": 12,
  "step": 1,
  "label": "Product limit",
  "default": 8
  }
  ],
  "presets": [
  {
  "name": "Featured products",
  "settings": {
  "section_heading": "<p>Best sellers</p>"
  }
  }
  ]
  }
  {% endschema %}